(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64cb4300"],{"1d2e":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{padding:"1rem"}},[i("el-col",[i("el-form",{attrs:{inline:!0,model:e.filters}},[i("el-form-item",{attrs:{label:"账户查询:"}},[i("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,size:"small",icon:"circle-close","on-icon-click":e.handleOrderIconClick},on:{input:e.selectInput,select:e.handleSelect},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filters.username,callback:function(t){e.$set(e.filters,"username",t)},expression:"filters.username"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"客户手机号:"}},[i("el-input",{attrs:{size:"small",placeholder:"客户手机号",icon:"circle-close","on-icon-click":e.handleOrderIconClick},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filters.declarePhone,callback:function(t){e.$set(e.filters,"declarePhone",t)},expression:"filters.declarePhone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"核销日期:"}},[i("el-date-picker",{attrs:{size:"small",format:"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.filters.beginTime,callback:function(t){e.$set(e.filters,"beginTime",t)},expression:"filters.beginTime"}}),e._v("\n        -\n        "),i("el-date-picker",{attrs:{size:"small",format:"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.filters.endTime,callback:function(t){e.$set(e.filters,"endTime",t)},expression:"filters.endTime"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("查询")])],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:function(t){return e.testExport()}}},[e._v("导出")])],1),e._v(" "),i("el-form-item",{staticStyle:{color:"red"}},[i("p",{staticStyle:{padding:"0",margin:"0"}},[e._v("注意事项：")]),e._v(" "),i("span",[e._v("1、请查看手机号是否正确，确定请按操作的同步按钮")]),i("br"),e._v(" "),i("span",[e._v("2、如果对手机号未匹配有疑问，请到修改按钮处填写订单号再按操作的申请审核按钮，等待管理员审核，反馈未匹配原因")]),i("br"),e._v(" "),i("span",[e._v("3、上午11点后，未申报成功号码将进入申报号码异常记录列表，请及时查询，可在下午15点前做出修改重新申报")])])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"orderList declErrorTable",staticStyle:{"margin-top":"1rem"},attrs:{data:e.list,align:"center",size:"small","tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{width:"55",type:"selection"}}),e._v(" "),i("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),e._v(" "),i("el-table-column",{attrs:{prop:"declarePhone",label:"申报手机号"}}),e._v(" "),i("el-table-column",{attrs:{prop:"declareTime",label:"核销日期"}}),e._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"反馈信息"}}),e._v(" "),i("el-table-column",{attrs:{prop:"declareTypeName",label:"申报状态"}}),e._v(" "),i("el-table-column",{attrs:{prop:"statusType",label:"审核状态"}}),e._v(" "),i("el-table-column",{attrs:{prop:"username",label:"操作人"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{attrs:{content:"更新",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(i){return e.handleUpdate(t.$index,t.row)}}})],1),e._v(" "),1!==t.row.status&&2!==t.row.status?i("el-tooltip",{attrs:{content:"审核申请",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-check",circle:""},on:{click:function(i){return e.handleApply(t.$index,t.row)}}})],1):e._e(),e._v(" "),i("el-tooltip",{attrs:{content:"同步",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-refresh",circle:""},on:{click:function(i){return e.sameOrder(t.row)}}})],1)]}}])})],1),e._v(" "),i("el-row",{staticStyle:{"margin-bottom":"2rem"}},[i("el-col",{staticClass:"toolbar",attrs:{span:12}},[i("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),i("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,title:"更新信息",center:"",visible:e.dialogFormVisibleEdit},on:{"update:visible":function(t){e.dialogFormVisibleEdit=t},close:function(t){return e.closeDialog("editForm")}}},[i("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:e.editForm,rules:e.editRule,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"申报手机号:",prop:"declarePhone","label-width":e.formLabelWidth}},[i("el-input",{model:{value:e.editForm.declarePhone,callback:function(t){e.$set(e.editForm,"declarePhone",t)},expression:"editForm.declarePhone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"订单号:",prop:"declareId","label-width":e.formLabelWidth}},[i("el-input",{model:{value:e.editForm.orderId,callback:function(t){e.$set(e.editForm,"orderId",t)},expression:"editForm.orderId"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitEditGoods("editForm")}}},[e._v("确 定")])],1)],1)],1)},l=[],r=i("323e"),a=i.n(r),n=i("c1df"),o=i.n(n),c=i("da29"),d={name:"DeclError",data:function(){var e=function(e,t,i){var s=/^1[3456789]\d{9}$/;""===t?i(new Error("号码不能为空")):s.test(t)?i():i(new Error("请输入正确的手机号码"))};return{filters:{declarePhone:null,beginTime:null,endTime:null,username:"",sysUserId:null},listLoading:!1,list:[],checkedAll:!1,multipleSelection:[],multipleSelection2:[],total:0,size:10,pageNo:1,dialogFormVisibleEdit:!1,formLabelWidth:"100px",editForm:{declareId:"",declarePhone:"",orderId:""},editRule:{declarePhone:[{required:!0,message:"请输入申报手机号"},{validator:e,trigger:"blur"}]}}},mounted:function(){this.statusInfo=sessionStorage.getItem("statusInfo"),this.getList()},methods:{search:function(){this.pageNo=1,this.getList()},querySearchAsync:function(e,t){var i=this,s={username:this.filters.username};Object(c["xb"])(s).then((function(e){0===e.data.code?(i.restaurants=e.data.Data,i.restaurants.map((function(e){e.value=e.username})),clearTimeout(i.timeout),i.timeout=setTimeout((function(){t(i.restaurants)}),1e3*Math.random())):i.filters.sysUserId=null}))},handleSelect:function(e){this.filters.sysUserId=e.id},selectInput:function(){""==this.filters.username&&(this.filters.sysUserId=null)},getList:function(){var e=this;null==this.filters.sysUserId&&(this.filters.sysUserId=null),null!=this.filters.beginTime&&(this.filters.beginTime=o()(this.filters.beginTime).format("YYYY-MM-DD")),null!=this.filters.endTime&&(this.filters.endTime=o()(this.filters.endTime).format("YYYY-MM-DD"));var t={currPage:this.pageNo,pageSize:this.size,username:this.filters.username,beginTime:this.filters.beginTime,endTime:this.filters.endTime,declarePhone:this.filters.declarePhone,sysUserId:this.filters.sysUserId};Object(c["F"])(t).then((function(t){if(0===t.data.code){var i=t.data.data;e.list=i.records,e.size=i.size,e.total=i.total;var s=e.list.length;0===s&&e.pageNo>1&&(e.pageNo-=1,e.getList()),e.list.map((function(e){switch(e.declareType){case 1:e.declareTypeName="申报中";break;case 2:e.declareTypeName="申报成功";break;case 3:e.declareTypeName="申报失败";break}switch(e.status){case 1:e.statusType="审核中";break;case 2:e.statusType="审核完成";break}}))}else e.total=0,e.list=[],e.$message({type:"error",message:t.data.msg,duration:1e3});a.a.done(),e.listLoading=!1}))},handleUpdate:function(e,t){this.dialogFormVisibleEdit=!0,this.editForm.declareId=t.declareId,this.editForm.declarePhone=t.declarePhone,this.editForm.declareTime=t.declareTime},submitEditGoods:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var i={orderId:t.editForm.orderId,declareId:t.editForm.declareId,declarePhone:t.editForm.declarePhone,declareTime:t.editForm.declareTime};Object(c["Bb"])(i).then((function(e){0===e.data.code?t.$message({type:"success",message:"更新成功",duration:1e3}):t.$message({type:"error",message:e.data.msg,duration:2e3}),t.getList(),t.dialogFormVisibleEdit=!1}))}))},closeDialog:function(e){this.dialogFormVisibleEdit=!1,this.$refs[e].resetFields()},handleApply:function(e,t){var i=this,s={declareId:t.declareId,status:1,declareTime:t.declareTime};Object(c["r"])(s).then((function(e){0===e.data.code?i.$message({type:"success",message:e.data.msg,duration:2e3}):i.$message({type:"error",message:e.data.msg,duration:2e3}),i.getList()}))},sameOrder:function(e){var t=this,i={listDeclare:[{declarePhone:e.declarePhone,declareTime:e.declareTime,sysUserId:e.sysUserId}]};Object(c["ub"])(i).then((function(e){0===e.data.code?(0==e.data.Data?t.$message({type:"error",message:"同步失败",duration:2e3}):t.$message({type:"success",message:"同步成功",duration:2e3}),t.getList()):(t.$message({type:"error",message:e.data.msg,duration:2e3}),t.getList())}))},handleSelectionChange:function(e){e.length>0?this.checkedAll=!0:this.checkedAll=!1,this.multipleSelection2=e},handleOrderIconClick:function(){this.filters.username="",this.filters.sysUserId=""},handleCurrentChange:function(e){this.pageNo=e,this.getList()},handleSizeChange:function(e){this.size=e,this.getList()},testExport:function(){null==this.filters.sysUserId&&(this.filters.sysUserId=null),null!=this.filters.beginTime&&(this.filters.beginTime=o()(this.filters.beginTime).format("YYYY-MM-DD")),null!=this.filters.endTime&&(this.filters.endTime=o()(this.filters.endTime).format("YYYY-MM-DD")),console.log(this.filters.sysUserId);var e={beginTime:this.filters.beginTime,endTime:this.filters.endTime,declarePhone:this.filters.declarePhone,sysUserId:this.filters.sysUserId};Object(c["c"])(e).then((function(e){var t="申报号码异常记录",i=document.createElement("a"),s=window.URL.createObjectURL(new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}));i.href=s,i.target="_blank",i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}))}}},m=d,u=(i("25c1"),i("2877")),h=Object(u["a"])(m,s,l,!1,null,"4deb001b",null);t["default"]=h.exports},"25c1":function(e,t,i){"use strict";var s=i("a230"),l=i.n(s);l.a},a230:function(e,t,i){}}]);