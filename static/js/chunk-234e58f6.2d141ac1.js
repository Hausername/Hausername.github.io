(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-234e58f6"],{"386b":function(e,t,a){var i=a("5ca1"),r=a("79e5"),l=a("be13"),n=/"/g,o=function(e,t,a,i){var r=String(l(e)),o="<"+t;return""!==a&&(o+=" "+a+'="'+String(i).replace(n,"&quot;")+'"'),o+">"+r+"</"+t+">"};e.exports=function(e,t){var a={};a[e]=t(o),i(i.P+i.F*r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",a)}},"3b2b":function(e,t,a){var i=a("7726"),r=a("5dbc"),l=a("86cc").f,n=a("9093").f,o=a("aae3"),s=a("0bfb"),d=i.RegExp,c=d,u=d.prototype,m=/a/g,p=/a/g,g=new d(m)!==m;if(a("9e1e")&&(!g||a("79e5")((function(){return p[a("2b4c")("match")]=!1,d(m)!=m||d(p)==p||"/a/i"!=d(m,"i")})))){d=function(e,t){var a=this instanceof d,i=o(e),l=void 0===t;return!a&&i&&e.constructor===d&&l?e:r(g?new c(i&&!l?e.source:e,t):c((i=e instanceof d)?e.source:e,i&&l?s.call(e):t),a?this:u,d)};for(var f=function(e){e in d||l(d,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},h=n(c),b=0;h.length>b;)f(h[b++]);u.constructor=d,d.prototype=u,a("2aba")(i,"RegExp",d)}a("7a56")("RegExp")},a102:function(e,t,a){e.exports=a.p+"static/img/null.66f62a69.png"},a95e:function(e,t,a){"use strict";var i=a("c390"),r=a.n(i);r.a},b54a:function(e,t,a){"use strict";a("386b")("link",(function(e){return function(t){return e(this,"a","href",t)}}))},c390:function(e,t,a){},e72a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"1rem"}},[a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",{attrs:{label:"礼品名称："}},[a("el-input",{attrs:{placeholder:"礼品名称",icon:"circle-close"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类别："}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.search},model:{value:e.filters.goodsList,callback:function(t){e.$set(e.filters,"goodsList",t)},expression:"filters.goodsList"}},e._l(e.goodsList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[e._v(e._s(t.name)+"\n                    ")])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"积分范围："}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getScope(e.filters.scopeData)}},model:{value:e.filters.scopeData,callback:function(t){e.$set(e.filters,"scopeData",t)},expression:"filters.scopeData"}},e._l(e.scopeData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.scope,value:t.id}},[e._v(e._s(t.scope)+"\n                    ")])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"积分区间："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"",icon:"circle-close"},model:{value:e.filters.startScope,callback:function(t){e.$set(e.filters,"startScope",t)},expression:"filters.startScope"}}),e._v(" -\n                    "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"",icon:"circle-close"},model:{value:e.filters.endScope,callback:function(t){e.$set(e.filters,"endScope",t)},expression:"filters.endScope"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("查询")])],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addFun()}}},[e._v("添加")])],1),e._v(" "),a("el-form-item",[e.checkedAll?a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger"},on:{click:function(t){return e.delAll()}}},[e._v("批量删除")]):e._e()],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"orderList_goods",staticStyle:{width:"100%","margin-top":"1rem"},attrs:{size:"small",border:"",data:e.list,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"礼品名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"礼品编码",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"50px",width:"80px"},attrs:{onerror:e.defaultImg,src:t.row.img},on:{click:function(a){return e.scal(t.row.img)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"brand",label:"礼品品牌"}}),e._v(" "),a("el-table-column",{attrs:{prop:"integral",label:"积分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"120",label:"操作","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.edit(t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.del(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"2rem"}},[a("el-col",{staticClass:"toolbar",attrs:{span:12}},[a("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{"close-on-click-modal":!1,width:"40%",title:e.diaTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.close()}}},[a("el-form",{ref:"addForm",attrs:{rules:e.rules,model:e.addForm}},[a("el-form-item",{attrs:{label:"礼品名称",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"礼品编码",prop:"code","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.addForm.code,callback:function(t){e.$set(e.addForm,"code",t)},expression:"addForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品链接",prop:"link","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.addForm.link,callback:function(t){e.$set(e.addForm,"link",t)},expression:"addForm.link"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"礼品品牌",prop:"brand","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.addForm.brand,callback:function(t){e.$set(e.addForm,"brand",t)},expression:"addForm.brand"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域",prop:"area","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.addForm.area,callback:function(t){e.$set(e.addForm,"area",t)},expression:"addForm.area"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品类型",prop:"categoryId","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.categoryId,callback:function(t){e.$set(e.addForm,"categoryId",t)},expression:"addForm.categoryId"}},e._l(e.categoryId,(function(t){return a("el-option",{attrs:{label:t.name,value:t.id}},[e._v(e._s(t.name)+"\n                        ")])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"积分专区",prop:"integralPrecinctId","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.integralPrecinctId,callback:function(t){e.$set(e.addForm,"integralPrecinctId",t)},expression:"addForm.integralPrecinctId"}},e._l(e.integralPrecinctId,(function(t){return a("el-option",{attrs:{label:t.name,value:t.id}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"积分",prop:"integral","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.addForm.integral,callback:function(t){e.$set(e.addForm,"integral",t)},expression:"addForm.integral"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"平台Logo",prop:"file","label-width":e.formLabelWidth}},[a("el-upload",{ref:"upload",class:{hide:e.hideUpload},attrs:{action:"http://192.168.0.120/commity/getadd","http-request":e.upLoadFile,"list-type":"picture-card","file-list":e.ad_url_list,limit:1,data:e.imgData,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-change":e.handleImgChange}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{center:"",title:"详细图片",visible:e.imgVisible,width:"40%"},on:{"update:visible":function(t){e.imgVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{width:"500px"},attrs:{src:e.thisGoodsImg}})]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.imgVisible=!1}}},[e._v("确 定")])],1)])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{center:"",title:"编辑器",visible:e.wangVisible,width:"40%"},on:{"update:visible":function(t){e.wangVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",{attrs:{id:"wangedit"}})]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.imgVisible=!1}}},[e._v("确 定")])],1)])],1)],1)},r=[],l=(a("b54a"),a("7f7f"),a("da29")),n=a("ed08"),o={data:function(){return{filters:{name:"",goodsList:"",startScope:"",endScope:"",scopeData:""},goodsList:[],scopeData:[],list:[],diaTitle:"",defaultImg:'this.src="'+a("a102")+'"',addForm:{name:"",code:"",link:"",brand:"",area:"",ruleId:"",category:"",id:"",integralArea:"",integralPrecinctId:"",categoryId:"",integral:"",file:""},integralPrecinctId:[],categoryId:[],rules:{name:[{required:!0,message:"礼品名称不能为空",trigger:"blur"}],code:[{required:!0,message:"礼品编码不能为空",trigger:"blur"}],brand:[{required:!0,message:"礼品品牌不能为空",trigger:"blur"}],integralPrecinctId:[{required:!0,message:"积分专区不能为空",trigger:"blur"}],categoryId:[{required:!0,message:"商品类型不能为空",trigger:"blur"}],integral:[{required:!0,message:"积分不能为空",trigger:"blur"}]},imgVisible:!1,thisGoodsImg:"",imgData:{},imgInfo:{file:""},total:0,size:10,pageNo:1,multipleSelection:[],checkedAll:!1,dialogFormVisible:!1,formLabelWidth:"100px",dialogImageUrl:"",dialogVisible:!1,ad_url_list:[],limitCount:1,hideUpload:!1,wangVisible:!1}},mounted:function(){this.getList(),this.scopeList(),this.typeList(),this.scopeArea()},methods:{search:function(){if(this.pageNo=1,null!=this.filters.startScope&&null!=this.filters.endScope&&this.filters.startScope>this.filters.endScope){var e=0,t=0;t=this.filters.startScope,e=this.filters.endScope,this.filters.endScope=t,this.filters.startScope=e}this.getList()},getList:function(){var e=this,t={currPage:this.pageNo,pageSize:this.size,name:this.filters.name,categoryId:this.filters.goodsList,startScope:this.filters.startScope,endScope:this.filters.endScope};Object(l["O"])(t).then((function(t){0===t.data.code?(e.list=t.data.data.records,e.size=t.data.data.size,e.total=t.data.data.total,e.list.map((function(e){var t=new Date(e.createTime),a=new Date(e.updateTime);e.createTime=Object(n["b"])(t),e.updateTime=Object(n["b"])(a),e.img=l["imgIp"]+e.img}))):(e.total=0,e.list=[],e.$message({type:"error",message:t.data.msg,duration:1e3}))}))},scopeList:function(){var e=this;Object(l["C"])().then((function(t){0===t.data.code?e.integralPrecinctId=t.data.data:e.$message({type:"error",message:t.data.msg,duration:1e3})}))},typeList:function(){var e=this;Object(l["P"])().then((function(t){0===t.data.code?(e.categoryId=t.data.data,e.goodsList=t.data.data):e.$message({type:"error",message:t.data.msg,duration:1e3})}))},scopeArea:function(){var e=this;Object(l["qb"])().then((function(t){0===t.data.code?e.scopeData=t.data.data:e.$message({type:"error",message:t.data.msg,duration:1e3})}))},getScope:function(e){var t=this;this.scopeData.map((function(a){a.id==e&&(t.filters.startScope=a.startScope,t.filters.endScope=a.endScope)}))},handleSelectionChange:function(e){e.length>0?this.checkedAll=!0:this.checkedAll=!1,this.multipleSelection=e},addFun:function(){this.diaTitle="新增商品",this.dialogFormVisible=!0},edit:function(e){if(this.diaTitle="修改商品",this.addForm={name:e.name,code:e.code,link:e.link,brand:e.brand,area:e.rule.area,ruleId:e.rule.id,categoryId:e.categoryId,integralPrecinctId:e.integralPrecinctId,integral:e.integral,file:e.file,id:e.id},this.dialogFormVisible=!0,null==e.img)this.hideUpload=!0;else{this.imgInfo.file=e.file,this.ad_url_list=[];var t={};t.name=e.name+".jpg",t.url=e.img,this.ad_url_list.push(t),this.hideUpload=!0}},delAll:function(){var e=this;this.$confirm("此操作将永久删除当前选中积分专区, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];e.multipleSelection.map((function(e){t.push(e.id)}));var a=t;Object(l["M"])(a).then((function(t){0===t.data.code?(e.$message({type:"success",message:t.data.msg,duration:1e3}),e.getList()):e.$message({type:"error",message:t.data.msg,duration:1e3})}))}))},del:function(e,t){var a=this;this.$confirm("此操作将永久删除当前选中积分专区, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[];e.push(t.id);var i=e;Object(l["M"])(i).then((function(e){0===e.data.code?a.$message({type:"success",message:"删除成功!",duration:1e3}):a.$message({type:"error",message:e.data.msg,duration:1e3}),a.getList()}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},close:function(){this.dialogFormVisible=!1,this.$refs.upload.clearFiles(),this.hideUpload=!1,this.addForm={name:"",code:"",link:"",brand:"",area:"",categoryId:"",integralPrecinctId:"",integral:"",file:""},this.resetForm("addForm")},scal:function(e){this.imgVisible=!0,this.thisGoodsImg=e},handleRemove:function(e,t){this.hideUpload=t.length>=this.limitCount},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleImgChange:function(e,t){this.hideUpload=t.length>=this.limitCount},upLoadFile:function(e){console.log(e,2121);var t=e.file.size/1048576;if(t>9)return this.$message({type:"error",message:"上传图片过大",duration:2e3}),this.ad_url_list=[],void(this.hideUpload=!1);this.addForm.file=e.file},confirm:function(){var e=this;this.$refs["addForm"].validate((function(t){if(!t)return!1;if("新增商品"===e.diaTitle){var a=new FormData;a.append("name",e.addForm.name),a.append("code",e.addForm.code),a.append("link",e.addForm.link),a.append("brand",e.addForm.brand),a.append("area",e.addForm.area),a.append("ruleId",e.addForm.ruleId),a.append("categoryId",e.addForm.categoryId),a.append("integralPrecinctId",e.addForm.integralPrecinctId),a.append("integral",e.addForm.integral),a.append("id",e.addForm.id),a.append("file",e.addForm.file),console.log(a),Object(l["L"])(a).then((function(t){0===t.data.code?(e.$message({type:"success",message:t.data.msg,duration:1e3}),e.dialogFormVisible=!1):e.$message({type:"error",message:t.data.msg,duration:1e3}),e.getList()}))}else if("修改商品"===e.diaTitle){var i=new FormData;i.append("name",e.addForm.name),i.append("code",e.addForm.code),i.append("link",e.addForm.link),i.append("brand",e.addForm.brand),i.append("area",e.addForm.area),i.append("ruleId",e.addForm.ruleId),i.append("categoryId",e.addForm.categoryId),i.append("integralPrecinctId",e.addForm.integralPrecinctId),i.append("integral",e.addForm.integral),i.append("id",e.addForm.id),i.append("file",e.addForm.file),Object(l["U"])(i).then((function(t){0===t.data.code?(e.dialogFormVisible=!1,e.getList()):e.$message({type:"error",message:t.data.msg,duration:1e3})}))}}))},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},handleCurrentChange:function(e){this.pageNo=e,this.getList()},handleSizeChange:function(e){this.size=e,this.getList()}}},s=o,d=(a("a95e"),a("2877")),c=Object(d["a"])(s,i,r,!1,null,null,null);t["default"]=c.exports},ed08:function(e,t,a){"use strict";a("3b2b"),a("28a5"),a("a481"),a("6b54");function i(e,t){e=void 0===e?new Date:e,e="number"===typeof e?new Date(e):e,t=t||"yyyy-MM-dd HH:mm:ss";var a={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),q:Math.floor((e.getMonth()+3)/3),w:e.getDay(),H:e.getHours(),h:e.getHours()%12===0?12:e.getHours()%12,m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds()},i=["天","一","二","三","四","五","六"];for(var r in a)t=t.replace(new RegExp(r+"+","g"),(function(e){var t=a[r]+"";if("w"===r)return(e.length>2?"星期":"周")+i[t];for(var l=0,n=t.length;l<e.length-n;l++)t="0"+t;return 1===e.length?t:t.substring(t.length-e.length)}));return t}function r(e){var t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),r=e.getHours(),l=e.getMinutes(),n=e.getSeconds();return t+"-"+a+"-"+i+" "+r+":"+l+":"+n}a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}))}}]);