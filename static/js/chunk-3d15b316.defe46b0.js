(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d15b316","chunk-5241b4d2"],{"333d":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];i("c5f6");Math.easeInOutQuad=function(e,t,i,n){return e/=n/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,i){var n=s(),a=e-n,l=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=l;var s=Math.easeInOutQuad(u,n,a,t);r(s),u<t?o(e):i&&"function"===typeof i&&i()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},c=u,d=(i("dfcf"),i("2877")),m=Object(d["a"])(c,n,a,!1,null,"ef53c196",null);t["default"]=m.exports},"3c55":function(e,t,i){"use strict";var n=i("505d"),a=i.n(n);a.a},"505d":function(e,t,i){},cd86:function(e,t,i){},dfcf:function(e,t,i){"use strict";var n=i("cd86"),a=i.n(n);a.a},eaf1:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{padding:"1rem"}},[i("div"),e._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"1rem"},attrs:{size:"small",border:"",data:e.tableData3,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"exchangePhone",label:"兑换手机号",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"presentedPhone",label:"赠送手机号",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"goodstypecoupon",label:"红包额度",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"goodsQuantity",label:"已发红包数量",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"goodsBackUp",label:"待发数量",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"xflag",label:"状态",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"stockTime",label:"赠送时间","min-width":"100"}})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e._v(" "),i("div",[i("el-dialog",{attrs:{"close-on-click-modal":!1,width:"40%",title:e.diaTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.close()}}},[i("el-form",{ref:"userEntity",attrs:{rules:e.rules,model:e.userEntity}},[i("el-form-item",{attrs:{prop:"phone",label:"电话号码","label-width":e.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},on:{input:function(t){return e.queryPhone(e.userEntity.phone)}},model:{value:e.userEntity.phone,callback:function(t){e.$set(e.userEntity,"phone",t)},expression:"userEntity.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"province",label:"归属地（省）","label-width":e.formLabelWidth}},[i("el-input",{attrs:{id:"province",disabled:"","auto-complete":"off"},model:{value:e.userEntity.province,callback:function(t){e.$set(e.userEntity,"province",t)},expression:"userEntity.province"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"city",label:"归属地（市）","label-width":e.formLabelWidth}},[i("el-input",{attrs:{id:"city",disabled:"","auto-complete":"off"},model:{value:e.userEntity.city,callback:function(t){e.$set(e.userEntity,"city",t)},expression:"userEntity.city"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"commission",label:"佣金余额","label-width":e.formLabelWidth}},[i("el-input",{attrs:{type:"number",min:"0","auto-complete":"off"},model:{value:e.userEntity.commission,callback:function(t){e.$set(e.userEntity,"commission",t)},expression:"userEntity.commission"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("确 定")])],1)],1)],1)],1)},a=[],o=(i("ac6a"),i("6b54"),i("333d")),r=i("d815"),s=i("c1df"),l=i.n(s),u={components:{Pagination:o["default"]},data:function(){var e=this,t=function(e,t,i){void 0!==t?(t=t.toString().trim(),""!==t?i():i(new Error("用户名不能为空"))):i(new Error("用户名不能为空"))},i=function(t,i,n){if(void 0!==i)if(i=i.toString().trim(),""!==i){var a=/^1[3456789]\d{9}$/;if(a.test(i)){var o=e.tableData3.filter((function(t){return e.userEntity.id!==t.id&&t.phone===i}));o.length>0?n(new Error("电话号码已经存在")):n()}else n(new Error("请填写正确的电话号码"))}else n(new Error("电话号码不能为空"));else n(new Error("电话号码不能为空"))},n=function(e,t,i){void 0!==t?(t=t.toString().trim(),""!==t?i():i(new Error("vercode不能为空"))):i(new Error("vercode不能为空"))};return{imguRL:"../assets/image/someone.jpg",tableData3:[],userEntity:{id:"",img:"",openid:"",phone:"",username:"",vercode:"",vercodeTime:"",commission:0,province:"",city:""},dhNumbers:[],packages:[],total:0,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id"},diaTitle:"",multipleSelection:[],checkedAll:!1,dialogFormVisible:!1,imgInfo:{uuid:"",iid:""},formLabelWidth:"100px",imgData:{},dialogImageUrl:"",dialogVisible:!1,ad_url_list:[],limitCount:1,hideUpload:!1,rules:{username:[{validator:t,trigger:"blur"}],phone:[{required:!0,message:"电话号码不能为空",trigger:"blur"},{validator:i,trigger:"blur"}],vercode:[{required:!0,message:"vercode不能为空",trigger:"blur"},{validator:n,trigger:"blur"}],commission:[{required:!0,message:"佣金余额不能为空",trigger:"blur"}]}}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;this.$axios.post(r["a"].sendPackets.getList,{page:this.listQuery.limit,begin:this.listQuery.page}).then((function(t){if(200===t.status){e.tableData3=t.data.rows,e.tableData3.map((function(e){e.stockTime=l()(e.stockTime).format("YYYY-MM-DD HH:mm:ss")}));var i=e.tableData3.length;0===i&&e.listQuery.page>1&&(e.listQuery.page-=1,e.getList()),e.total=t.data.total}else e.$message({type:"error",message:t.data.msg,duration:1e3})}))},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){e.length>0?this.checkedAll=!0:this.checkedAll=!1,this.multipleSelection=e},addFun:function(){this.diaTitle="添加用户",this.dialogFormVisible=!0},delAll:function(){var e=this;this.$confirm("此操作将永久删除所有积分记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({type:"success",message:"删除成功!",duration:1e3})})).catch((function(){e.$message({type:"info",message:"已取消删除!",duration:1e3})}))},edit:function(e){this.diaTitle="修改用户",this.userEntity={id:e.id,img:e.img,openid:e.openid,phone:e.phone,username:e.username,vercode:e.vercode,vercodeTime:e.vercodeTime,commission:e.commission,province:e.province,city:e.city},this.dialogFormVisible=!0},del:function(e){var t=this;this.$confirm("此操作将永久删除该用户记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post(r["a"].userManage.delIncar,{id:e.id,phone:e.phone}).then((function(e){200===e.data.code?(t.$message({type:"success",message:e.data.msg,duration:1e3}),t.getList()):t.$message({type:"error",message:e.data.msg,duration:1e3})}))})).catch((function(){t.$message({type:"info",message:"已取消删除",duration:1e3})}))},confirm:function(){var e=this;this.$refs["userEntity"].validate((function(t){t&&("添加用户"===e.diaTitle?e.$axios.post(r["a"].userManage.getadd,e.userEntity).then((function(t){200===t.data.code?(e.$message({type:"success",message:t.data.msg,duration:1e3}),e.dialogFormVisible=!1,e.userEntity={},e.getList()):e.$message({type:"error",message:t.data.msg,duration:1e3})})):"修改用户"===e.diaTitle&&e.$axios.post(r["a"].userManage.update,e.userEntity).then((function(t){200===t.data.code?(e.$message({type:"success",message:t.data.msg,duration:1e3}),e.getList(),e.dialogFormVisible=!1):e.$message({type:"error",message:t.data.msg,duration:1e3})})))}))},close:function(){this.dialogFormVisible=!1,this.userEntity={id:"",img:"",openid:"",phone:"",username:"",vercode:"",vercodeTime:"",commission:0},this.resetForm("userEntity")},queryPhone:function(e){var t=this;this.userEntity.province="",this.userEntity.city="";var i=/^1[3456789]\d{9}$/;i.test(e)&&this.$axios.get("/api/dianhua_api/open/location?tel="+e).then((function(i){if(200===i.status&&null!==i.data.response[e].detail&&""!==i.data.response[e].detail){t.userEntity.province=i.data.response[e].detail.province,t.userEntity.city=i.data.response[e].detail.area[0].city;var n=document.getElementById("city").value,a=document.getElementById("province").value;""===n&&(document.getElementById("city").value=t.userEntity.city),""===a&&(document.getElementById("province").value=t.userEntity.province)}}))},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()}}},c=u,d=(i("3c55"),i("2877")),m=Object(d["a"])(c,n,a,!1,null,null,null);t["default"]=m.exports}}]);