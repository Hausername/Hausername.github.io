(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66548e28","chunk-5241b4d2"],{"333d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},n=[];i("c5f6");Math.easeInOutQuad=function(t,e,i,a){return t/=a/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function s(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,i){var a=r(),n=t-a,l=20,u=0;e="undefined"===typeof e?500:e;var c=function t(){u+=l;var r=Math.easeInOutQuad(u,a,n,e);s(r),u<e?o(t):i&&"function"===typeof i&&i()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&l(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},c=u,d=(i("dfcf"),i("2877")),p=Object(d["a"])(c,a,n,!1,null,"ef53c196",null);e["default"]=p.exports},"42bd":function(t,e,i){"use strict";var a=i("5f8a"),n=i.n(a);n.a},"5f8a":function(t,e,i){},c2f1:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{padding:"1rem"}},[i("div"),t._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"1rem"},attrs:{size:"small",border:"",data:t.tableData3,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{width:"55",label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.Id))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"Account",label:"用户名"}}),t._v(" "),i("el-table-column",{attrs:{prop:"Phone",label:"电话号码"}}),t._v(" "),i("el-table-column",{attrs:{prop:"TypeName",label:"类型"}}),t._v(" "),i("el-table-column",{attrs:{prop:"AuditName",label:"审核状态"}}),t._v(" "),i("el-table-column",{attrs:{prop:"StatusName",label:"状态"}}),t._v(" "),i("el-table-column",{attrs:{prop:"Nickname",label:"昵称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"Lockmoney",label:"今日收益"}}),t._v(" "),i("el-table-column",{attrs:{prop:"Money",label:"总收益"}}),t._v(" "),i("el-table-column",{attrs:{prop:"Cash",label:"申请提现"}}),t._v(" "),i("el-table-column",{attrs:{prop:"Cashmoney",label:"已提现"}}),t._v(" "),i("el-table-column",{attrs:{align:"center","min-width":"180",label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下级列表",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view",circle:""},on:{click:function(i){return t.lowUser(e.row)}}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"折扣设置",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-edit",circle:""},on:{click:function(i){return t.editDiscount(e.row)}}})],1),t._v(" "),1===e.row.Audit?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-zoom-in",circle:""},on:{click:function(i){return t.check(e.row)}}})],1):t._e(),t._v(" "),1===e.row.Status?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单击启用",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-check",circle:""},on:{click:function(i){return t.open(e.row)}}})],1):t._e(),t._v(" "),2===e.row.Status?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单击禁用",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-close",circle:""},on:{click:function(i){return t.open(e.row)}}})],1):t._e()]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),i("div",[i("el-dialog",{attrs:{"close-on-click-modal":!1,width:"40%",title:t.diaTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:function(e){return t.close()}}},[i("el-form",{ref:"userEntity",attrs:{rules:t.rules,model:t.userEntity}},[i("el-form-item",{attrs:{prop:"Account",label:"账号","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.userEntity.Account,callback:function(e){t.$set(t.userEntity,"Account",e)},expression:"userEntity.Account"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"Password",label:"密码","label-width":t.formLabelWidth}},[i("el-input",{attrs:{id:"Password",type:"password","auto-complete":"off"},model:{value:t.userEntity.Password,callback:function(e){t.$set(t.userEntity,"Password",e)},expression:"userEntity.Password"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"ConfirmPassword",label:"确认密码","label-width":t.formLabelWidth}},[i("el-input",{attrs:{id:"ConfirmPassword",type:"password","auto-complete":"off"},model:{value:t.userEntity.ConfirmPassword,callback:function(e){t.$set(t.userEntity,"ConfirmPassword",e)},expression:"userEntity.ConfirmPassword"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"Nickname",label:"姓名","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.userEntity.Nickname,callback:function(e){t.$set(t.userEntity,"Nickname",e)},expression:"userEntity.Nickname"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"Phone",label:"手机号","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.userEntity.Phone,callback:function(e){t.$set(t.userEntity,"Phone",e)},expression:"userEntity.Phone"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.close()}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirm()}}},[t._v("确 定")])],1)],1)],1),t._v(" "),i("div",[i("el-dialog",{attrs:{"close-on-click-modal":!1,width:"40%",title:t.diaTitle,visible:t.disCountVisible},on:{"update:visible":function(e){t.disCountVisible=e},close:function(e){return t.close()}}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-form",{attrs:{model:t.userEntity}},t._l(t.goodsList,(function(e){return i("el-form-item",{key:e.Id,attrs:{label:e.Title,"label-width":t.formLabelWidth}},[i("el-input",{attrs:{min:"0",size:"medium",placeholder:"请输入折扣"},nativeOn:{keyup:function(e){return t.proving(e)}},model:{value:e.Discount,callback:function(i){t.$set(e,"Discount",i)},expression:"item.Discount"}},[i("template",{slot:"prepend"},[t._v("折扣")]),t._v(" "),i("template",{slot:"append"},[t._v("%")])],2)],1)})),1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.close()}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmDiscount()}}},[t._v("确 定")])],1)])],1)],1)},n=[],o=(i("ac6a"),i("6b54"),i("333d")),s=i("d815"),r={components:{Pagination:o["default"]},data:function(){var t=function(t,e,i){if(void 0!==e)if(e=e.toString().trim(),""!==e){var a=/^[1]([3-9])[0-9]{9}$/;a.test(e)?i():i(new Error("请填写正确的手机号码"))}else i(new Error("手机号码不能为空"));else i(new Error("手机号码不能为空"))};return{userId:"",discount:"",tableData3:[],goodsList:[],disCountVisible:!1,userEntity:{Id:"",Account:"",Password:"",Nickname:"",ConfirmPassword:"",Phone:""},dhNumbers:[],packages:[],total:0,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id"},diaTitle:"",multipleSelection:[],checkedAll:!1,dialogFormVisible:!1,formLabelWidth:"100px",rules:{Account:[{required:!0,message:"账号不能为空",trigger:"blur"}],Password:[{required:!0,message:"密码不能为空",trigger:"blur"}],Nickname:[{required:!0,message:"姓名不能为空",trigger:"blur"}],ConfirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"}],Phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{validator:t,trigger:"blur"}]}}},mounted:function(){this.getList()},methods:{getAllGoods:function(){var t=this;this.$axios.post(s["a"].integralList.getList).then((function(e){200===e.data.Code&&(t.goodsList=e.data.Data)}))},getList:function(){var t=this,e=new FormData;e.append("Page",this.listQuery.page),e.append("Num",this.listQuery.limit),this.$axios.post(s["a"].getAllUser.getList,e).then((function(e){if(200===e.data.Code){t.tableData3=e.data.Data.data,t.total=e.data.Data.total;for(var i=0;i<t.tableData3.length;i++)1===t.tableData3[i].Type?t.tableData3[i].TypeName="推广渠道":2===t.tableData3[i].Type&&(t.tableData3[i].TypeName="操作员"),1===t.tableData3[i].Audit?t.tableData3[i].AuditName="未审核":2===t.tableData3[i].Audit&&(t.tableData3[i].AuditName="审核通过"),1===t.tableData3[i].Status?t.tableData3[i].StatusName="未启用":2===t.tableData3[i].Status&&(t.tableData3[i].StatusName="已启用")}else t.$message({type:"error",message:e.data.Msg})}))},toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){t.length>0?this.checkedAll=!0:this.checkedAll=!1,this.multipleSelection=t},addFun:function(){this.diaTitle="添加用户",this.dialogFormVisible=!0},delAll:function(){var t=this;this.$confirm("此操作将永久删除所有积分记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"删除成功!",duration:1e3})})).catch((function(){t.$message({type:"info",message:"已取消删除!",duration:1e3})}))},edit:function(t){this.diaTitle="修改用户",this.userEntity={id:t.id,img:t.img,openid:t.openid,phone:t.phone,username:t.username,vercode:t.vercode,vercodeTime:t.vercodeTime,commission:t.commission,province:t.province,city:t.city},this.dialogFormVisible=!0},editDiscount:function(t){var e=this;this.disCountVisible=!0,this.diaTitle="折扣设置",this.userId=t.Id;var i=new FormData;i.append("Userid",t.Id),this.$axios.post(s["a"].operatorManage.setDiscount,i).then((function(t){200===t.data.Code&&(e.goodsList=t.data.Data)}))},lowUser:function(t){console.log(t),this.$router.push({path:"agentList",query:{Fid:t.Id}})},confirm:function(){var t=this;this.$refs["userEntity"].validate((function(e){if(e)if("添加用户"===t.diaTitle){var i=new FormData;i.append("Account",t.userEntity.Account),i.append("Password",t.userEntity.Password),i.append("Nickname",t.userEntity.Nickname),i.append("ConfirmPassword",t.userEntity.ConfirmPassword),i.append("Phone",t.userEntity.Phone),t.$axios.post(s["a"].operatorManage.add,i).then((function(e){200===e.data.Code?(t.$message({type:"success",message:e.data.Msg,duration:1e3}),t.dialogFormVisible=!1,t.userEntity={},t.getList()):t.$message({type:"error",message:e.data.Msg,duration:1e3}),t.formData={}}))}else"修改用户"===t.diaTitle&&t.$axios.post(s["a"].userManage.update,t.userEntity).then((function(e){200===e.data.code?(t.$message({type:"success",message:e.data.msg,duration:1e3}),t.getList(),t.dialogFormVisible=!1):t.$message({type:"error",message:e.data.msg,duration:1e3})}))}))},confirmDiscount:function(){var t=this,e=new FormData,i=this.userId,a=this.goodsList,n=[],o=0,r="";a.map((function(t){String(t.Discount).indexOf(".")>-1&&(o=1,r="折扣不能为小数"),t.Discount<0&&(o=3,r="折扣不能小于0"),t.Discount>=100&&(o=3,r="折扣不能大于100");var e={Cid:"",Discount:""};e.Cid=t.Cid,e.Discount=t.Discount,n.push(e)})),1!==o&&2!==o&&3!==o?(console.log("所有的折扣i信息",n),e.append("Userid",i),e.append("List",JSON.stringify(n)),this.$axios.post(s["a"].operatorManage.setDiscount,e).then((function(i){200===i.data.Code?(t.$message({type:"success",message:i.data.Msg,duration:1e3}),t.disCountVisible=!1):t.$message({type:"error",message:i.data.Msg,duration:1e3}),e={}}))):this.$message({type:"error",message:r,duration:1e3})},close:function(){this.dialogFormVisible=!1,this.disCountVisible=!1,this.userEntity={id:"",img:"",openid:"",phone:"",username:"",vercode:"",vercodeTime:"",commission:0},this.goodsList.map((function(t){t.Discount=""})),this.resetForm("userEntity")},queryPhone:function(t){var e=this;this.userEntity.province="",this.userEntity.city="";var i=/^1[3456789]\d{9}$/;i.test(t)&&this.$axios.get("/api/dianhua_api/open/location?tel="+t).then((function(i){if(200===i.status&&null!==i.data.response[t].detail&&""!==i.data.response[t].detail){e.userEntity.province=i.data.response[t].detail.province,e.userEntity.city=i.data.response[t].detail.area[0].city;var a=document.getElementById("city").value,n=document.getElementById("province").value;""===a&&(document.getElementById("city").value=e.userEntity.city),""===n&&(document.getElementById("province").value=e.userEntity.province)}}))},resetForm:function(t){void 0!==this.$refs[t]&&this.$refs[t].resetFields()},proving:function(t){var e=window.event?t.keyCode:t.which;189!==e&&190!==e&&110!==e&&109!==e||(t.target.value="")},check:function(t){var e=this,i=new FormData;i.append("Uid",t.Id),this.$axios.post(s["a"].operatorManage.userAudit,i).then((function(t){200===t.data.Code?(e.$message({type:"success",message:t.data.Msg,duration:1e3}),e.getList()):e.$message({type:"error",message:t.data.Msg,duration:1e3}),i={}}))},open:function(t){var e=this,i=new FormData;i.append("Uid",t.Id),this.$axios.post(s["a"].operatorManage.userStatus,i).then((function(t){200===t.data.Code?(e.$message({type:"success",message:t.data.Msg,duration:1e3}),e.getList()):e.$message({type:"error",message:t.data.Msg,duration:1e3}),i={}}))}}},l=r,u=(i("42bd"),i("2877")),c=Object(u["a"])(l,a,n,!1,null,null,null);e["default"]=c.exports},cd86:function(t,e,i){},dfcf:function(t,e,i){"use strict";var a=i("cd86"),n=i.n(a);n.a}}]);