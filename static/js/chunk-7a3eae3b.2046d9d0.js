(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a3eae3b"],{1086:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{padding:"1rem"}},[o("div",[o("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.addFun()}}},[e._v("添加")]),e._v(" "),e.checkedAll?o("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger"},on:{click:function(t){return e.delAll()}}},[e._v("批量删除")]):e._e()],1),e._v(" "),o("el-table",{ref:"multipleTable",staticClass:"orderList_goods",staticStyle:{width:"100%","margin-top":"1rem"},attrs:{size:"small",border:"",data:e.list,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"startScope",label:"积分开始范围"}}),e._v(" "),o("el-table-column",{attrs:{prop:"endScope",label:"积分结束范围"}}),e._v(" "),o("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),o("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"}}),e._v(" "),o("el-table-column",{attrs:{align:"center","min-width":"120",label:"操作","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(o){return e.edit(t.row)}}}),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(o){return e.del(t.$index,t.row)}}})]}}])})],1),e._v(" "),o("el-row",{staticStyle:{"margin-bottom":"2rem"}},[o("el-col",{staticClass:"toolbar",attrs:{span:12}},[o("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),o("div",[o("el-dialog",{attrs:{"close-on-click-modal":!1,width:"36%",title:e.diaTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.close()}}},[o("el-form",{ref:"addForm",attrs:{rules:e.rules,model:e.addForm}},[o("el-form-item",{attrs:{label:"积分范围",prop:"scope","label-width":e.formLabelWidth}},[o("el-input-number",{staticStyle:{width:"40%"},attrs:{"controls-position":"right"},on:{change:e.handleChangeAdd},model:{value:e.addForm.startScope,callback:function(t){e.$set(e.addForm,"startScope",t)},expression:"addForm.startScope"}}),e._v(" -\n                    "),o("el-input-number",{staticStyle:{width:"40%"},attrs:{"controls-position":"right"},on:{change:e.handleChangeCut},model:{value:e.addForm.endScope,callback:function(t){e.$set(e.addForm,"endScope",t)},expression:"addForm.endScope"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){return e.close()}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("确 定")])],1)],1)],1)],1)},n=[],r=o("da29"),i=o("ed08"),s=(o("c1df"),{name:"goodsTable",data:function(){return{checkedAll:!1,total:0,size:10,pageNo:1,list:[],dialogFormVisible:!1,formLabelWidth:"100px",diaTitle:"",addForm:{startScope:"",endScope:"",id:""},integralArea:[],rules:{startScope:[{required:!0,message:"积分范围不能为空",trigger:"change"},{type:"number",message:"只能输入数字",trigger:"blur"}],endScope:[{required:!0,message:"积分范围不能为空",trigger:"change"},{type:"number",message:"只能输入数字",trigger:"blur"}]},num:1}},mounted:function(){this.getList(),this.typeList()},methods:{getList:function(){var e=this,t={currPage:this.pageNo,pageSize:this.size};Object(r["sb"])(t).then((function(t){0===t.data.code?(e.list=t.data.data.records,e.size=t.data.data.size,e.total=t.data.data.total,e.list.map((function(e){var t=new Date(e.createTime),o=new Date(e.updateTime);e.createTime=Object(i["b"])(t),e.updateTime=Object(i["b"])(o)}))):(e.total=0,e.list=[],e.$message({type:"error",message:t.data.msg,duration:1e3}))}))},typeList:function(){var e=this;Object(r["P"])().then((function(t){0===t.data.code?e.goodsList=t.data.data:e.$message({type:"error",message:t.data.msg,duration:1e3})}))},addFun:function(){this.diaTitle="新增范围",this.dialogFormVisible=!0},confirm:function(){var e=this;this.$refs["addForm"].validate((function(t){if(!t)return!1;if("新增范围"===e.diaTitle){if(console.log(e.addForm.startScope,e.addForm.startScope),null!=e.addForm.startScope&&void 0!=e.addForm.startScope||(e.addForm.startScope=null),null!=e.addForm.endScope&&void 0!=e.addForm.endScope||(e.addForm.endScope=null),(null==e.addForm.startScope||void 0==e.addForm.startScope)&&(null==e.addForm.endScope||void 0==e.addForm.endScope))return console.log(333),void e.$message({type:"error",message:"积分范围不能为空",duration:1e3});if(null!=e.addForm.startScope&&null!=e.addForm.endScope&&e.addForm.endScope<e.addForm.startScope)return console.log(444),void e.$message({type:"error",message:"积分范围错误",duration:1e3});if(e.addForm.endScope<e.addForm.startScope)return console.log(222),void e.$message({type:"error",message:"积分范围错误",duration:1e3});var o={startScope:e.addForm.startScope,endScope:e.addForm.endScope,id:e.addForm.id};console.log(o),Object(r["pb"])(o).then((function(t){0===t.data.code?(e.$message({type:"success",message:t.data.msg,duration:1e3}),e.dialogFormVisible=!1):e.$message({type:"error",message:t.data.msg,duration:1e3}),e.getList()}))}else if("修改范围"===e.diaTitle){null!=e.addForm.startScope&&void 0!=e.addForm.startScope||(e.addForm.startScope=null),null!=e.addForm.endScope&&void 0!=e.addForm.startScope||(e.addForm.endScope=null),null==e.addForm.startScope&&null==e.addForm.endScope&&e.$message({type:"error",message:"积分范围不能为空",duration:1e3});var a={startScope:e.addForm.startScope,endScope:e.addForm.endScope,id:e.addForm.id};Object(r["tb"])(a).then((function(t){0===t.data.code?(e.dialogFormVisible=!1,e.getList()):e.$message({type:"error",message:t.data.msg,duration:1e3})}))}}))},del:function(e,t){var o=this;this.$confirm("此操作将永久删除当前选中积分专区, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[];e.push(t.id);var a=e;Object(r["rb"])(a).then((function(e){0===e.data.code?o.$message({type:"success",message:"删除成功!",duration:1e3}):o.$message({type:"error",message:e.data.msg,duration:1e3}),o.getList()}))})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))},delAll:function(){var e=this;this.$confirm("此操作将永久删除当前选中积分专区, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];e.multipleSelection.map((function(e){t.push(e.id)}));var o=t;Object(r["rb"])(o).then((function(t){0===t.data.code?(e.$message({type:"success",message:t.data.msg,duration:1e3}),e.getList()):e.$message({type:"error",message:t.data.msg,duration:1e3})}))}))},edit:function(e){this.diaTitle="修改范围",this.addForm={startScope:e.startScope,endScope:e.endScope,id:e.id},this.dialogFormVisible=!0},handleChangeAdd:function(e){},handleChangeCut:function(e){},close:function(){this.dialogFormVisible=!1,this.addForm={startScope:"",endScope:""},this.resetForm("addForm")},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},handleSelectionChange:function(e){e.length>0?this.checkedAll=!0:this.checkedAll=!1,this.multipleSelection=e},handleCurrentChange:function(e){this.pageNo=e,this.getList()},handleSizeChange:function(e){this.size=e,this.getList()}}}),d=s,l=(o("4031"),o("2877")),c=Object(l["a"])(d,a,n,!1,null,"fd6ea966",null);t["default"]=c.exports},"3b2b":function(e,t,o){var a=o("7726"),n=o("5dbc"),r=o("86cc").f,i=o("9093").f,s=o("aae3"),d=o("0bfb"),l=a.RegExp,c=l,u=l.prototype,m=/a/g,g=/a/g,p=new l(m)!==m;if(o("9e1e")&&(!p||o("79e5")((function(){return g[o("2b4c")("match")]=!1,l(m)!=m||l(g)==g||"/a/i"!=l(m,"i")})))){l=function(e,t){var o=this instanceof l,a=s(e),r=void 0===t;return!o&&a&&e.constructor===l&&r?e:n(p?new c(a&&!r?e.source:e,t):c((a=e instanceof l)?e.source:e,a&&r?d.call(e):t),o?this:u,l)};for(var h=function(e){e in l||r(l,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},f=i(c),b=0;f.length>b;)h(f[b++]);u.constructor=l,l.prototype=u,o("2aba")(a,"RegExp",l)}o("7a56")("RegExp")},4031:function(e,t,o){"use strict";var a=o("8416"),n=o.n(a);n.a},8416:function(e,t,o){},ed08:function(e,t,o){"use strict";o("3b2b"),o("28a5"),o("a481"),o("6b54");function a(e,t){e=void 0===e?new Date:e,e="number"===typeof e?new Date(e):e,t=t||"yyyy-MM-dd HH:mm:ss";var o={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),q:Math.floor((e.getMonth()+3)/3),w:e.getDay(),H:e.getHours(),h:e.getHours()%12===0?12:e.getHours()%12,m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds()},a=["天","一","二","三","四","五","六"];for(var n in o)t=t.replace(new RegExp(n+"+","g"),(function(e){var t=o[n]+"";if("w"===n)return(e.length>2?"星期":"周")+a[t];for(var r=0,i=t.length;r<e.length-i;r++)t="0"+t;return 1===e.length?t:t.substring(t.length-e.length)}));return t}function n(e){var t=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),n=e.getHours(),r=e.getMinutes(),i=e.getSeconds();return t+"-"+o+"-"+a+" "+n+":"+r+":"+i}o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return n}))}}]);