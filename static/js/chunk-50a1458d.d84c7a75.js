(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50a1458d"],{"0801":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"1rem"}},[r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0"},attrs:{span:24}},[r("el-form",{attrs:{inline:!0},model:{value:e.filters,callback:function(t){e.filters=t},expression:"filters"}},[r("el-form-item",{attrs:{label:"用户名:"}},[r("el-input",{attrs:{size:"small",placeholder:"用户名",icon:"circle-close","on-icon-click":e.handleOrderIconClick},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filters.username,callback:function(t){e.$set(e.filters,"username",t)},expression:"filters.username"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","margin-top":"1rem"},attrs:{data:e.dataList,border:"",size:"small","tooltip-effect":"dark","highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"username",label:"用户名",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"mobile",label:"手机号",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleType",label:"角色类型",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"statusName",label:"账户状态",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n          ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleReset(t.$index,t.row)}}},[e._v("重置密码\n          ")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",staticStyle:{"margin-bottom":"2rem"},attrs:{span:24}},[r("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,title:"添加用户",visible:e.dialogFormVisibleAdd},on:{"update:visible":function(t){e.dialogFormVisibleAdd=t},close:function(t){return e.closeDialog("addForm")}}},[r("el-form",{ref:"addForm",staticClass:"demo-ruleForm",attrs:{model:e.addForm,rules:e.addRules}},[r("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"username"}},[r("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户手机号","label-width":e.formLabelWidth,prop:"mobile"}},[r("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户密码","label-width":e.formLabelWidth,prop:"password"}},[r("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"账户状态","label-width":e.formLabelWidth,prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},e._l(e.Status,(function(t){return r("el-option",{attrs:{label:t.label,value:t.value}},[e._v(e._s(t.label)+"\n            ")])})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"角色","label-width":e.formLabelWidth,prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},e._l(e.type,(function(t){return r("el-option",{attrs:{label:t.description,value:t.id}},[e._v(e._s(t.description)+"\n            ")])})),1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.editAddForm("addForm")}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormAdd("addForm")}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,title:"编辑用户",visible:e.dialogFormVisibleEdit},on:{"update:visible":function(t){e.dialogFormVisibleEdit=t},close:function(t){return e.closeDialog("ruleForm")}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"username"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户手机号","label-width":e.formLabelWidth,prop:"mobile"}},[r("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"账户状态","label-width":e.formLabelWidth,prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.Status,(function(t){return r("el-option",{key:t.id,attrs:{label:t.label,value:t.value}},[e._v(e._s(t.label)+"\n            ")])})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"角色","label-width":e.formLabelWidth,prop:"type"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.ruleForm.typeName,callback:function(t){e.$set(e.ruleForm,"typeName",t)},expression:"ruleForm.typeName"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.editReviseForm("ruleForm")}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormEdit("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,title:"重置密码",center:"",visible:e.dialogFormVisibleReset},on:{"update:visible":function(t){e.dialogFormVisibleReset=t},close:function(t){return e.closeDialog("resetForm")}}},[r("span",[e._v("临时密码：")]),e._v(" "+e._s(e.resetPassword)+"\n      "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormReset("resetForm")}}},[e._v("确 定")])],1)])],1)},s=[],i=r("323e"),o=r.n(i),l=r("da29"),n=r("ed08"),d={name:"setUers",data:function(){var e=function(e,t,r){console.log("验证触发了吗",t);var a=/^1[3456789]\d{9}$/;""===t?r(new Error("号码不能为空")):a.test(t)?r():r(new Error("请输入正确的手机号码"))};return{filters:{mobile:"",createTime:"",updateTime:"",status:""},userMenu:[],dataList:[],listLoading:!1,total:0,size:10,pageNo:1,dialogFormVisibleAdd:!1,dialogFormVisibleEdit:!1,dialogFormVisibleReset:!1,resetPassword:"",ruleForm:{id:"",username:"",mobile:"",status:"",type:"",typeName:""},addForm:{username:"",mobile:"",password:"",status:"",type:""},Status:[{value:"0",label:"禁用"},{value:"1",label:"启用"}],type:[],isDisabled:!1,rules:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"}],mobile:[{required:!0,message:"请输入用户手机号",trigger:"blur"},{validator:e,trigger:"blur"}],status:[{required:!0,message:"请选择用户状态",trigger:"change"}],type:[{required:!0,message:"请选择角色类型",trigger:"change"}]},addRules:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"}],mobile:[{required:!0,message:"请输入用户手机号",trigger:"blur"},{validator:e,trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"}],status:[{required:!0,message:"请选择用户状态",trigger:"change"}],type:[{required:!0,message:"请选择角色类型",trigger:"change"}]},formLabelWidth:"100px"}},methods:{BtnList:function(){var e=new FormData,t=window.localStorage.getItem("btnId");e.append("menuId",t),Object(l["Jb"])(e).then((function(e){}))},getAllRole:function(){var e=this;Object(l["lb"])().then((function(t){0===t.data.code&&(e.type=t.data.roles)}))},search:function(){this.pageNo=1,this.orderList()},orderList:function(){var e=this,t=new FormData;t.append("currPage",this.pageNo),t.append("pageSize",this.size);var r={currPage:this.pageNo,pageSize:this.size,username:this.filters.username};o.a.start(),this.listLoading=!0,Object(l["Kb"])(r).then((function(t){if(0===t.data.code){var r=t.data.Data;e.dataList=r.records,e.dataList.map((function(e){switch(e.status){case 0:e.statusName="禁用";break;case 1:e.statusName="启用";break}switch(e.type){case 1:e.typeName="超级管理员";break;case 2:e.typeName="代理";break;case 3:e.typeName="操作员";break}var t=new Date(e.createTime);e.createTime=Object(n["b"])(t);var r=new Date(e.updateTime);e.updateTime=Object(n["b"])(r)})),e.size=r.size,e.total=r.total;var a=e.dataList.length;0===a&&e.pageNo>1&&(e.pageNo-=1,e.getList())}e.listLoading=!1,o.a.done()}))},handleAdd:function(){this.dialogFormVisibleAdd=!0},editAddForm:function(e){this.dialogFormVisibleAdd=!1,this.$refs[e].resetFields()},submitFormAdd:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r={username:t.addForm.username,mobile:t.addForm.mobile,password:t.addForm.password,status:parseInt(t.addForm.status),type:t.addForm.type};Object(l["f"])(r).then((function(e){0===e.data.code?(t.$message({type:"success",message:"添加成功",duration:1e3}),t.orderList(),t.dialogFormVisibleAdd=!1):t.$message({type:"error",message:e.data.msg,duration:1e3})}))}))},handleEdit:function(e,t){switch(this.dialogFormVisibleEdit=!0,this.ruleForm.id=t.id,this.ruleForm.username=t.username,this.ruleForm.mobile=t.mobile,this.ruleForm.status=t.status+"",this.ruleForm.type=t.type,t.type){case 1:this.ruleForm.typeName="超级管理员";break;case 2:this.ruleForm.typeName="代理";break;case 3:this.ruleForm.typeName="操作员";break}},submitFormEdit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r={id:t.ruleForm.id,username:t.ruleForm.username,mobile:t.ruleForm.mobile,status:parseInt(t.ruleForm.status),type:parseInt(t.ruleForm.type)};Object(l["Hb"])(r).then((function(e){0===e.data.code?(t.$message({type:"success",message:"修改成功",duration:1e3}),t.orderList(),t.dialogFormVisibleEdit=!1):(t.$message({type:"error",message:e.data.msg,duration:1e3}),t.orderList(),t.dialogFormVisibleEdit=!1)}))}))},editReviseForm:function(e){this.dialogFormVisibleEdit=!1,this.ruleForm.username="",this.ruleForm.mobile="",this.ruleForm.status="",this.ruleForm.type="",this.$refs[e].resetFields()},handleDelete:function(e,t){var r=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[];e.push(t.id);var a={userIds:e};Object(l["u"])(a).then((function(e){0===e.data.code?(r.$message({type:"success",message:"删除成功!",duration:100}),r.orderList()):(r.$message({type:"error",message:e.data.msg,duration:100}),r.orderList())}))})).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},handleReset:function(e,t){var r=this;this.dialogFormVisibleReset=!0;var a={id:t.id};Object(l["jb"])(a).then((function(e){0===e.data.code&&(r.resetPassword=e.data.psd)}))},submitFormReset:function(){this.dialogFormVisibleReset=!1},handleOrderIconClick:function(){},closeDialog:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields(),this.ruleForm.username="",this.ruleForm.mobile="",this.ruleForm.status="",this.ruleForm.type=""},handleCurrentChange:function(e){this.pageNo=e,this.orderList()},handleSizeChange:function(e){this.size=e,this.orderList()}},mounted:function(){this.BtnList(),this.orderList(),this.getAllRole()}},u=d,m=(r("6610"),r("2877")),c=Object(m["a"])(u,a,s,!1,null,"227f155d",null);t["default"]=c.exports},"3b2b":function(e,t,r){var a=r("7726"),s=r("5dbc"),i=r("86cc").f,o=r("9093").f,l=r("aae3"),n=r("0bfb"),d=a.RegExp,u=d,m=d.prototype,c=/a/g,p=/a/g,b=new d(c)!==c;if(r("9e1e")&&(!b||r("79e5")((function(){return p[r("2b4c")("match")]=!1,d(c)!=c||d(p)==p||"/a/i"!=d(c,"i")})))){d=function(e,t){var r=this instanceof d,a=l(e),i=void 0===t;return!r&&a&&e.constructor===d&&i?e:s(b?new u(a&&!i?e.source:e,t):u((a=e instanceof d)?e.source:e,a&&i?n.call(e):t),r?this:m,d)};for(var g=function(e){e in d||i(d,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},f=o(u),h=0;f.length>h;)g(f[h++]);m.constructor=d,d.prototype=m,r("2aba")(a,"RegExp",d)}r("7a56")("RegExp")},6610:function(e,t,r){"use strict";var a=r("c8d3"),s=r.n(a);s.a},c8d3:function(e,t,r){},ed08:function(e,t,r){"use strict";r("3b2b"),r("28a5"),r("a481"),r("6b54");function a(e,t){e=void 0===e?new Date:e,e="number"===typeof e?new Date(e):e,t=t||"yyyy-MM-dd HH:mm:ss";var r={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),q:Math.floor((e.getMonth()+3)/3),w:e.getDay(),H:e.getHours(),h:e.getHours()%12===0?12:e.getHours()%12,m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds()},a=["天","一","二","三","四","五","六"];for(var s in r)t=t.replace(new RegExp(s+"+","g"),(function(e){var t=r[s]+"";if("w"===s)return(e.length>2?"星期":"周")+a[t];for(var i=0,o=t.length;i<e.length-o;i++)t="0"+t;return 1===e.length?t:t.substring(t.length-e.length)}));return t}function s(e){var t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),s=e.getHours(),i=e.getMinutes(),o=e.getSeconds();return t+"-"+r+"-"+a+" "+s+":"+i+":"+o}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s}))}}]);